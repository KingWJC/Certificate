# 性能指标

- 字长和数据通路宽度

- 主存容量和存取速度

- **运算速度**

  - 主频（单位时间的脉冲数）和CUP时钟周期，互为倒数。

  - 平均每条指令的平均时钟周期个数**CPI（clock per instruction）与IPC（instruction per clock）**每时钟周期运行指令条数，互为倒数。

  - 百万条指令每秒MIPS（Million instructions Per Second）与MFLOPS（Million Floating point Operations per Second）每秒百万个浮点操作。

    MIPS = 指令条数/(执行时间 * 10^6) = 主频 / CPI = 主频 * IPC

    MFLOPS = 浮点操作次数/ (执行时间 * 10^6)

- 吞吐量与吞吐率

- 响应时间RT（Response Time）

- 完成时间TAT

- 兼容性

## 周期之间的关系

- 指令周期（Instruction Cycle）：取出并执行一条指令的时间。
- CPU周期：**亦称为机器周期**，一条指令执行过程被划分为若干阶段，每一阶段完成所需时间。
- 时钟周期（Clock Cycle）：又称震荡周期，是处理操作的最基本单位。
- 对于一个指令周期来说，我们取出一条指令，然后执行它，至少需要两个 CPU 周期。取出指令至少需要一个 CPU 周期，执行至少也需要一个 CPU 周期，复杂的指令则需要更多的 CPU 周期。而一个CPU周期是若干时钟周期之和。

# 阿姆达尔解决方案

Amdahl：对系统某组件采用某种更快的执行方式，所获得的系统性能的改变程度，取决于该组件被使用的频率，或所占总执行时间的比例。

加速比计算公式：$R=\frac{T_P}{T_i}=\frac1{(1-F_e)+F_e/S_e}$

- Tp：不使用改进组件时完成整个任务的时间
- Ti：使用改进组件时完成整个任务的时间
- Fe：表示改进比例，在原有系统上，能被改进的部分在总执行时间中所占的比例，总是小于1
- Se：表示改进的功能部件执行速度提高多少倍，总大于1

题目：阿姆达尔(Amdahl）定律量化定义了通过改进系统中某个组件的性能，使系统整体性能提高的程度。假设某一功能的处理时间为整个系统运行时间的**60%**，若使该功能的处理速度提高至原来的**5倍**，则根据阿姆达尔定律，整个系统的处理速度可提高至原来的**（1.923）**倍。

题解：计算$R=\frac 1{(1-0.6)+0.6/5}= 1/0.52=1.923$

# 性能评价方法

- 时钟频率法：以时钟频率的高低衡量速度（主频）
- 指令执行速度：表示机器运算速度的单位是MIPS
- 等效指令速度法：吉普森混合法，通过各类指令在程序中所占的比例进行计算得到。特点：**考虑指令比例不同的问题。**
- 数据处理速率法：PDR（Processing Data Rate）=L / R。特点：**考虑CPU + 存储**
- 综合理论性能法：CTP（Composite Theoretical Performance ) ：CTP用MTOPS (Million Theoretical Operations Per Second，每秒百万次理论运算)表示。CTP的估算方法是，首先算出处理部件每个计算单元的有效计算率，再按不同字长加以调整，得出该计算单元的理论性能，所有组成该处理部件的计算单元的理论性能之和即为CTP。
- **基准程序法：把应用程序中用的最多、最频繁的那部分核心程序作为评估计算机系统性能的标准程序，称为基准测试程序（benchmark）。基准程序时目前一致承认的测试系统性能的较好方法。**

评估意义从大到小排序：真实的程序，核心程序，小型基准程序，合成基准程序。

- **Dhrystone基准程序**：它是一个综合性的**整数基准**测试程序，是为了测试编译器和CPU处理整数指令和控制功能的有效性，人为地选择一些典型指令综合起来形成的测试程序.
- **Linpack基准程序**：它是国际上最流行的用于测试高性能计算机系统**浮点性能**的测试。
- **Whetstone基准程序**:它是用Fortran语言编写的**综合性测试**程序，主要由执行**浮点运算、功能调用、数组变址、条件转移和超越函数的程序**组成。
- SPEC基准程序：一种是测试计算机完成单项任务有多快，称为**速度测试**;另一种是测试计算机在一定时间内能完成多少项任务，称为**吞吐率测试**。
- TPC基准程序：TPC (Transaction Processing Council，事务处理委员会）基准程序用以评测计算机在事务处理、数据库处理、企业管理与决策支持系统等方面的性能。该基准程序的评测结果用每秒完成的事务处理数TPC来表示。
  - TPC-A基准程序规范用于评价在**OLTP环境**下的数据库和硬件的性能;
  - TPC-B测试的是不包括网络的**纯事务处理量**，用于模拟企业计算环境;
  - TPC-C测试的是联机订货系统;
  - TPC-D、TPC-H和TPC-R测试的都是决策支持系统，其中TPC-R允许有附加的优化选项;
  - TPC-E测试的是大型企业信息服务系统.
  - TPC-W是基于Web应用的基准程序，用来测试一些通过Internet进行市场服务和销售的商业行为，所以TPC-W可以看作是一个服务器的测试标准。